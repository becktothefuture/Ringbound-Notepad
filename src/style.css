/* =====================================================
   ROOT THEME VARIABLES
   ===================================================== */
:root {
  /* Notepad dimensions and spacing */
  --notepad-bg: rgb(240, 240, 240);              /* Light grey background color of the page body */
  --page-bg: #bbbbbb;                            /* Default page background (dark gray) */
  --page-radius: .5rem;                          /* Page corner radius */

  
  /* Typography */
  --font-family: 'Uncut Sans', system-ui, sans-serif; /* Clean, modern font stack */
  
  /* Shadow System Variables */
  --shadow-layers: 3;                            /* Number of shadow layers */
  --shadow-color: rgba(0, 0, 0, 0.2);            /* Base shadow color and opacity */
  --shadow-blur: 15px;                           /* Base shadow blur amount */
  --shadow-spread: 0px;                          /* Base shadow spread amount */
  --shadow-x-offset: 0px;                        /* Dynamic x-offset controlled by JS */
  --shadow-y-offset: 2px;                        /* Base y-offset */
  --shadow-transition: transform 0.2s ease-out;  /* Shadow movement transition */
  
  /* Page rotation origin */
  --page-rotation-origin-x: 50%;
  --page-rotation-origin-y: 5%;
}

/* =====================================================
   GLOBAL RESET AND BASE STYLES
   ===================================================== */
body, html {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
  background: var(--page-bg);
}

body {
  font-family: var(--font-family);
  font-size: 14px;
  min-height: 100svh;
  width: 100vw;
  display: flex;
  align-items: center;
  justify-content: center;
}

main {
  position: relative;
  width: 100vw;
  height: 100vh;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  padding-bottom: 5vh;
  box-sizing: border-box;
  overflow: hidden;
  perspective: 1400px; /* enable 3D context for children */
  perspective-origin: 50% 50%;
}

/* =====================================================
   MAIN NOTEPAD CONTAINER
   ===================================================== */
#notepad {
  position: relative;
  width: 50vw;
  max-width: 1100px;
  height: auto;
  aspect-ratio: 16/9;
  background: var(--notepad-bg);
  display: flex;
  align-items: flex-start;
  justify-content: center;
  z-index: 1000;
  perspective-origin: 50% 50%;
  transform-style: preserve-3d;
  overflow: visible;
  margin: auto;
  top: 0; left: 0; bottom: 0; right: 0;
  
  /* Shadow system configuration */
  --shadow-layers: 5;           /* Number of shadow layers */
  --shadow-color: 0, 0, 0;     /* Shadow RGB color */
  --shadow-opacity: 0.35;      /* Base opacity for shadows */
  --shadow-spread: 12px;       /* Base spread distance */
  --shadow-blur: 28px;         /* Base blur amount */
  --shadow-offset-y: 60px;     /* Vertical offset */
  --shadow-anim-duration: 0.3s; /* Shadow movement animation duration */
}

#notepad-inner {
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
}


/* =====================================================
   INDIVIDUAL PAGE STYLING
   ===================================================== */
.page {
  position: absolute;
  top: 0;
  left: 0; 
  width: 100%;
  height: 100%;
  aspect-ratio: 16/9;
  background: var(--page-bg);
  z-index: 2;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  transform-origin: var(--page-rotation-origin-x) var(--page-rotation-origin-y);
  transform-style: preserve-3d;
  /* GPU acceleration and performance optimizations */
  overflow: visible;
  --shadow-overlay: 0;
}

/* =====================================================
   PAGE CONTENT
   ===================================================== */
.page-content {
  position: relative;
  width: 100%;
  height: 100%;
  z-index: 200;
  transform: translateZ(0.1px);
  overflow: hidden;
  will-change: opacity, transform;
  transform-style: preserve-3d;
  padding: 1vh;
  box-sizing: border-box;
}

.page-content__inner{
  outline:2px solid #000;
  outline-offset:-2px; /* keeps border inside */
  box-sizing:border-box;
}

/* =====================================================
   PAGE PSEUDO-ELEMENTS (BACKFACE & SHADOW)
   ===================================================== */
.page::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(to bottom, #00000077 0%, #00000032 100%);
  z-index: 1;
  pointer-events: none;
  backface-visibility: visible;
  -webkit-backface-visibility: visible;
  will-change: auto;
  opacity: var(--backdrop-opacity, 1);
  transition: opacity 0.3s cubic-bezier(0.4,0,0.2,1);
  transform: translateZ(-1px) rotateY(180deg);
  transform-style: preserve-3d;
}

.page::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--shadow-color, rgba(0, 0, 0, 0.2));
  z-index: 10;
  pointer-events: none;
  backface-visibility: hidden;
  opacity: var(--shadow-overlay, 0);
  filter: blur(var(--shadow-blur, 0px));
}

/* Topmost page should have no inner shadow */
.page:first-child {
  --shadow-overlay: 0;
}

/* =====================================================
   PAGE BACKGROUND COLORS (DEBUG/FALLBACK)
   ===================================================== */
.page:nth-child(1) { background-color: hsl(0, 70%, 96%); }
.page:nth-child(2) { background-color: hsl(7, 70%, 96%); }
.page:nth-child(3) { background-color: hsl(15, 70%, 96%); }
.page:nth-child(4) { background-color: hsl(22, 70%, 96%); }
.page:nth-child(5) { background-color: hsl(29, 70%, 96%); }
.page:nth-child(6) { background-color: hsl(37, 70%, 96%); }
.page:nth-child(7) { background-color: hsl(44, 70%, 96%); }
.page:nth-child(8) { background-color: hsl(51, 70%, 96%); }
.page:nth-child(9) { background-color: hsl(59, 70%, 96%); }
.page:nth-child(10) { background-color: hsl(66, 70%, 96%); }
.page:nth-child(11) { background-color: hsl(73, 70%, 96%); }
.page:nth-child(12) { background-color: hsl(81, 70%, 96%); }
.page:nth-child(13) { background-color: hsl(88, 70%, 96%); }
.page:nth-child(14) { background-color: hsl(95, 70%, 96%); }
.page:nth-child(15) { background-color: hsl(103, 70%, 96%); }
.page:nth-child(16) { background-color: hsl(110, 70%, 96%); }
.page:nth-child(17) { background-color: hsl(117, 70%, 96%); }
.page:nth-child(18) { background-color: hsl(125, 70%, 96%); }
.page:nth-child(19) { background-color: hsl(132, 70%, 96%); }
.page:nth-child(20) { background-color: hsl(139, 70%, 96%); }
.page:nth-child(21) { background-color: hsl(147, 70%, 96%); }
.page:nth-child(22) { background-color: hsl(154, 70%, 96%); }
.page:nth-child(23) { background-color: hsl(161, 70%, 96%); }
.page:nth-child(24) { background-color: hsl(169, 70%, 96%); }
.page:nth-child(25) { background-color: hsl(176, 70%, 96%); }
.page:nth-child(26) { background-color: hsl(183, 70%, 96%); }
.page:nth-child(27) { background-color: hsl(191, 70%, 96%); }
.page:nth-child(28) { background-color: hsl(198, 70%, 96%); }
.page:nth-child(29) { background-color: hsl(205, 70%, 96%); }
.page:nth-child(30) { background-color: hsl(213, 70%, 96%); }
.page:nth-child(31) { background-color: hsl(220, 70%, 96%); }
.page:nth-child(32) { background-color: hsl(227, 70%, 96%); }
.page:nth-child(33) { background-color: hsl(235, 70%, 96%); }
.page:nth-child(34) { background-color: hsl(242, 70%, 96%); }
.page:nth-child(35) { background-color: hsl(249, 70%, 96%); }
.page:nth-child(36) { background-color: hsl(257, 70%, 96%); }
.page:nth-child(37) { background-color: hsl(264, 70%, 96%); }
.page:nth-child(38) { background-color: hsl(271, 70%, 96%); }
.page:nth-child(39) { background-color: hsl(279, 70%, 96%); }
.page:nth-child(40) { background-color: hsl(286, 70%, 96%); }
.page:nth-child(41) { background-color: hsl(293, 70%, 96%); }
.page:nth-child(42) { background-color: hsl(301, 70%, 96%); }
.page:nth-child(43) { background-color: hsl(308, 70%, 96%); }
.page:nth-child(44) { background-color: hsl(315, 70%, 96%); }
.page:nth-child(45) { background-color: hsl(323, 70%, 96%); }
.page:nth-child(46) { background-color: hsl(330, 70%, 96%); }
.page:nth-child(47) { background-color: hsl(337, 70%, 96%); }
.page:nth-child(48) { background-color: hsl(345, 70%, 96%); }
.page:nth-child(49) { background-color: hsl(352, 70%, 96%); }
.page:nth-child(50) { background-color: hsl(360, 70%, 96%); }

/* =====================================================
   CHAPTER TAB STYLES
   ===================================================== */
.page-tab {
  position: absolute;
  z-index: 1001;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--font-family);
  font-weight: 600;
  color: transparent !important;
  text-align: center;
  transition: transform 0.2s ease-out;
  background: #fff;
  pointer-events: auto;
}

/*
  SHADOW LAYER: Simple, flat, always behind the notebook
  Absolutely centered, no 3D transforms, matches notebook size
*/
.notebook__shadow {
  position: absolute;
  width: 100%;
  height: 100%;
  aspect-ratio: 16/11;
  pointer-events: none;
  z-index: 0; /* below notebook, above body */
  box-sizing: border-box;
  box-shadow: 
    0px 10px 15px -3px hsla(0, 5%, 0%, 0.1),
    0px 30px 30px -10px hsla(0, 5%, 0%, 0.15),
    0px 60px 50px -15px hsla(0, 5%, 0%, 0.2),
    0px 100px 80px -20px hsla(0, 5%, 0%, 0.25),
    0px 150px 120px -30px hsla(0, 5%, 0%, 0.3);
  /* Softer shadow with display-p3 color space for wider gamut displays */
  box-shadow:
    0px 10px 15px -3px color(display-p3 0.013 0.013 0.013 / 0.1),
    0px 30px 30px -10px color(display-p3 0.013 0.013 0.013 / 0.15), 
    0px 60px 50px -15px color(display-p3 0.013 0.013 0.013 / 0.2),
    0px 100px 80px -20px color(display-p3 0.013 0.013 0.013 / 0.25),
    0px 150px 120px -30px color(display-p3 0.013 0.013 0.013 / 0.3);
}



/* Visual indicator for Z-rotation testing (JS toggles this class) */
/* .notepad--z-rotating {
  border: 3px solid red !important;
} */

.notebook {
  transform-style: preserve-3d;
  position: relative;
}

.notebook__layered-shadow {
  position: absolute;
  inset: -20px;  /* Expand beyond notebook edges */
  pointer-events: none;  /* Don't interfere with interaction */
  transform-style: preserve-3d;
  /* First shadow layer (closest) */
  box-shadow:
    calc(var(--shadow-x-offset)) var(--shadow-y-offset) var(--shadow-blur) var(--shadow-spread) var(--shadow-color),
    /* Second shadow layer (middle distance) */
    calc(var(--shadow-x-offset) * 1.5) calc(var(--shadow-y-offset) * 2) calc(var(--shadow-blur) * 2) calc(var(--shadow-spread) * 2) var(--shadow-color),
    /* Third shadow layer (furthest) */
    calc(var(--shadow-x-offset) * 2) calc(var(--shadow-y-offset) * 3) calc(var(--shadow-blur) * 3) calc(var(--shadow-spread) * 3) var(--shadow-color);
  transition: var(--shadow-transition);
  will-change: transform;  /* Hint for browser optimization */
}

/* =====================================================
   (Add any utility/debug styles below as needed)
   ===================================================== */

/* ================= HOMEPAGE OVERLAY STYLES ================= */
#homepage-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: 100;
  pointer-events: none;
}

.homepage-titles {
  position: absolute;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: .25em;
  top: 5vh;
  left: 50%;
  transform: translateX(-50%);
  text-align: center;
  width: 100vw;
  pointer-events: none;
}

h1, h2 {
  font-family: var(--font-family);
  font-size: 1.1em;
  font-weight: 600;
  color: #1e1e1e;
  margin: 0;
  padding: 0;
  letter-spacing: 0.04em;
  text-transform: uppercase;
}




.homepage-logo {
  position: absolute;
  left: 50%;
  bottom: 4vh;
  transform: translate(-50%, -50%);
  width: 64px;
  height: 40px;
  pointer-events: none;
}

.homepage-logo svg {
  width: 100%;
  height: 100%;
  opacity: 0.10;
  display: block;
}

.homepage-buttons {
  position: absolute;
  top: calc(50% + 22vh);
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 1.5rem;
  pointer-events: auto;
}

.homepage-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 1000px;
  border: 1px solid #bbbbbb;
  font-family: var(--font-family);
  font-size: 0.75em;
  font-weight: 600;
  color: #414b66;
  text-transform: uppercase;
  text-wrap: nowrap;
  letter-spacing: 0.04em;
  text-decoration: none;
  transition: background 0.1s, color 0.2s, border 0.1s;
  cursor: pointer;
  pointer-events: auto;
  padding: 0.75rem 2.5rem;
}

.homepage-btn:hover, .homepage-btn:focus {
  background: #ffffff;
  border: 1px solid #ffffff;

  color: #1e1e1e;
}

#video-bg {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  object-fit: cover;
  z-index: 0;
  pointer-events: none;
  background: #eee;
}


@media (max-width: 390px) {
  .homepage-buttons { flex-direction: column; }
}



@font-face {
  font-family: 'Uncut Sans';
  src: url('./assets/fonts/UncutSans-Regular.woff2') format('woff2'),
       url('./assets/fonts/UncutSans-Regular.woff') format('woff'),
       url('./assets/fonts/UncutSans-Regular.otf') format('opentype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: 'Uncut Sans';
  src: url('./assets/fonts/UncutSans-Medium.woff2') format('woff2'),
       url('./assets/fonts/UncutSans-Medium.woff') format('woff');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: 'Uncut Sans';
  src: url('./assets/fonts/UncutSans-Light.otf') format('opentype');
  font-weight: 300;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: 'Uncut Sans';
  src: url('./assets/fonts/UncutSans-LightItalic.otf') format('opentype');
  font-weight: 300;
  font-style: italic;
  font-display: swap;
}

body, * {
  font-family: 'Uncut Sans', system-ui, sans-serif !important;
}